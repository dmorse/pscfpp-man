<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Build System Files (Overview)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="index.html">PSCF - Polymer Self-Consistent Field</a></li><li class="navelem"><a href="developer_page.html">Developer Information</a></li><li class="navelem"><a href="developer_build_page.html">Build System</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Build System Files (Overview) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="developer_build_make_page.html">Make and Makefiles</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_config_page.html">Configuration (config.mk) Files</a> (Next) <br  />
</p>
<p>This file briefly discusses the contents and purpose of different types of makefiles and makefile fragments that are used in the PSCF build system. All files with a filename extension .mk are makefile fragments that are included into makefiles via the make <a class="el" href="developer_build_make_page.html#developer_build_make_include_sec">include directive</a>.</p>
<h1 class="doxsection"><a class="anchor" id="developer_build_files_dirs_sec"></a>
File locations</h1>
<p>After the configure script is run, but before any source files are compiled, the following types of makefiles and makefile fragments exist in different levels of the src directory tree:</p>
<ul>
<li>The root of the src directory contains a makefile and a file named config.mk</li>
<li>Each namespace-level subdirectory of the src directory tree contains a makefile and files named sources.mk and patterns.mk</li>
<li>Every subdirectory of the src directory tree that contains compilable source files contains a makefile and a file named sources.mk</li>
</ul>
<p>In addition, PSCF root directory contains a makefile at this point.</p>
<p>Before the configure script is run, there are not any makefiles or makefile fragments in the bld directory. After the configure script is run, the following types of files will exist in the bld directory tree:</p>
<ul>
<li>The root of the bld directory tree will contains a makefile and a file named config.mk</li>
<li>Each namespace-level subdirectory of the bld directory will contains a makefile</li>
</ul>
<p>The configure script installs the config.mk files in both the src and bld directory, and installs all of the makefiles in the bld directory. The configure script also installs a bash script named "setopts" in the bld directory, by copying the corresponding script in the src directory.</p>
<p>Compilation leads to creation of additional intermediate object, dependency and library files in either the src directory (for in-source compilation) or the bld directory (for out-of-source) compilation, as discussed <a class="el" href="developer_build_process_page.html">previously</a>. Each dependency files is a short makefile fragments that can be included into makefiles.</p>
<h1 class="doxsection"><a class="anchor" id="developer_build_files_types_sec"></a>
Makefile fragment file types</h1>
<p>The names and contents of different types of makefile fragments used in the build system are summarized in the table below:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Filename  </th><th class="markdownTableHeadNone">Contents  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">configuration  </td><td class="markdownTableBodyNone">config.mk  </td><td class="markdownTableBodyNone">configuration file, defines global variables  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">source list  </td><td class="markdownTableBodyNone">sources.mk  </td><td class="markdownTableBodyNone">list source files and object file targets  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">pattern rule  </td><td class="markdownTableBodyNone">patterns.mk  </td><td class="markdownTableBodyNone">pattern rules for object files targets  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dependency  </td><td class="markdownTableBodyNone">*.d  </td><td class="markdownTableBodyNone">list prerequisites of a single *.o target  </td></tr>
</table>
<p>Each of these types of file is described in a bit more detail below, and then in greater detail in subsequent pages about different types of file:</p>
<ul>
<li><a class="el" href="developer_build_config_page.html">Configuration (config.mk) Files</a> : Makefile fragments named config.mk that are installed in the bld and src directory are configuration files that assign values to makefile variables that are used in other build system files. Among these are variables whose values give paths to the PSCF root directory and some of its main subdirectories, variables that specify command line options for the compiler, and variables that enable or disable particular features.</li>
<li><a class="el" href="developer_build_source_page.html">Source List (sources.mk) Files</a> : The makefile fragment named sources.mk in each directory in the src directory tree defines a pair of makefile variables whose values are, respectively, a list of all of the compilable source files in that directory and all of its subdirectories, and a list of all of the corresponding object file targets. Each source list file in a namespace-level directories also defines a rule to construct a static library.</li>
<li><a class="el" href="developer_build_pattern_page.html">Pattern Rule (patterns.mk) Files</a> : The makefile fragment named patterns.mk in each namespace-level subdirectory of src contains pattern rules that are used to compile all *.cpp and *.cu source files located in that directory and its subdirectories.</li>
<li><a class="el" href="developer_build_dependency_page.html">Dependency (*.d) Files</a> : The *.d dependency file that is created whenever a source file is compiled contains a single makefile rule that lists all of the required prerequisites of the associated object file, with no associated recipe.</li>
</ul>
<p>Every makefile within a namespace-level subdirectory of the src or bld directory includes a single config.mk configuration file, a single patterns.mk pattern rule file, one or more sources.mk source list files, and multiple *.d dependency files.</p>
<p><br  />
 <a class="el" href="developer_build_make_page.html">Make and Makefiles</a> (Prev)&#160; &#160; &#160; &#160; <a class="el" href="developer_build_page.html">Build System</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_config_page.html">Configuration (config.mk) Files</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
