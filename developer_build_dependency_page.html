<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Dependency (*.d) Files</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="index.html">PSCF - Polymer Self-Consistent Field</a></li><li class="navelem"><a href="developer_page.html">Developer Information</a></li><li class="navelem"><a href="developer_build_page.html">Build System</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Dependency (*.d) Files </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="developer_build_source_page.html">Source List (sources.mk) Files</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_pattern_page.html">Pattern Rule (patterns.mk) Files</a> (Next) <br  />
</p>
<p>The pattern rules used by PSCF to compile a source file create both an object file with file extension .o and a corresponding dependency file with file extension *.d. The resulting dependency file defines a makefile rule that lists all of the files that are prerequisites of the resulting object file. The pre-requisites of an object file are the files that are combined by the C preprocessor to create the translation unit that is compiled to create that object file. These prerequisites include both the associated *.cpp or *.cu source file and all of the header files and (in some cases) template implementation files that are directly or indirectly included into the source file via preprocessor #include directives.</p>
<p>The dependency file associated with an object file named Class.o defines a makefile rule that, is simplified form, might look something like this: </p><div class="fragment"><div class="line">Class.o: Class.cpp Class.h Header1.h Header2.h ....</div>
</div><!-- fragment --><p> Here, Header1.h, Header2.h, etc. represent header files other than the header containing the class definition that are directly or indirectly included into Class.cpp.</p>
<p>The rule defined in a dependency file does not contain a recipe. The make command instead infers the required recipe from an applicable pattern rule. The pattern rules for compiling *.cpp and *.cu files are defined in the pattern rule (atterns.mk) file in the relevant namespace level directory.</p>
<p>Though not shown in the above example, the paths to the target and prerequisites in a dependency file are all given in the dependency file as absolute paths, defined relative to the root of the entire filesystem. As a result, the paths in real dependency files are much longer than those shown in the above simplified example.</p>
<p>The list of prerequisites generated by the PSCF build system always includes the config.mk files located in the relevant build directory (src or bld), in addition to any source code file prerequisites. The configuration file is included as a prerequisite because this file defines makefile variables that control conditional compilation of some features. Changes in the relevant config.mk file can thus change the content of a translation unit that is passed to the compiler, and thus change change the behavior of the resulting object code.</p>
<p>Makefiles contain include directives that include the dependency files for all object files that the makefile is responsible for creating. This is shown more explicitly in the discussion of <a class="el" href="developer_build_makefile_page.html">makefiles</a>. As a result, the make command is generally able to find a rule with a prerequisite list for every existing object file target it may need to update.</p>
<p>The list of prerequisites given in a dependency file is generated automatically by a script that calls the gcc compiler with an option that instructs the compiler to analyze C++ include directives. This compiler option was designed for precisely for the purpose of automatically generating prerequisite lists for makefile rules.</p>
<p><br  />
 <a class="el" href="developer_build_source_page.html">Source List (sources.mk) Files</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="developer_page.html">Developer Information</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_pattern_page.html">Pattern Rule (patterns.mk) Files</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
