<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Out-of-Source and In-Source Builds</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">PSCF - Polymer Self-Consistent Field Theory</a></li><li class="navelem"><a class="el" href="install_page.html">Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Out-of-Source and In-Source Builds </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="el" href="install_setup_page.html">Setup Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_targets_page.html">Makefile targets</a> (Next) <br  />
</p>
<h1><a class="anchor" id="install_inout_build"></a>
Intermediate Files and Build Directories</h1>
<p >When the PSCF makefile system compiles a program or set of programs, it generates a large number of intermediate files that are to needed to construct the final executable program files. These intermediate files include:</p>
<ul>
<li>An object file with a file extension *.o that is associated with each compilable source file (with extension *.cpp or *.cu), which has the same base file name as that of the source file. Each object file is created by compiling the associated source file.</li>
<li>A dependency file with file extension *.d associated with each source file, which is generated by analyzing which header (*.h) files are included directly or indirectly into that source file</li>
<li>Several static libraries with extension *.a, each of which contains all of the object code generated by compiling the source files in a subdirectory of pscfpp/src.</li>
</ul>
<p >During compilation, all of these intermediate files are placed in a directory that we will refer as the "build" directory.</p>
<p >All C++ header and source files for PSCF are contained in the pscfpp/src/ directory tree. The build directory used by PSCF may either be the same as the src/ directory or it may be a separate directory, depending on whether the code is compiled "in-source" or "out-of-source". When PSCF is built "in-source", each *.o and *.d file that is created by compiling a source file (extension *.cpp or *.cu) is placed in the same directory as the corresponding source file. When PSCF is instead built "out-of-source", these intermediate files are instead placed in an equivalent location in a separate build directory tree with the same directory structure. By default, pscfpp/bld is used as the build directory tree for out-of-source builds. All executable program files are installed in the pscfpp/bin directory, for either in-source or out-of-source compilation.</p>
<p >We refer to the two directories src/ and bld/ in what follows as standard build directories. The bld/ directory has a directory structure analogous to that of the src/ directory. Both src/ and bld/ contain a set of subdirectories named util/, pscf/, fd1d/, pspc/, and pspg/, which we refer to in what follows as namespace level directories.</p>
<h1><a class="anchor" id="install_inout_out"></a>
Out-of-Source Builds</h1>
<p >We recommend that most users build PSCF out-of source. The overview of instructions given in a <a class="el" href="install_overview_page.html">previous page</a> were instructions for performing an out-of-source build. An out of out-of-source build will be performed if commands "make all-cpu" and "make pspg" are invoked from either the root pscfpp/ directory (as recommended in those instructions) or from the pscfpp/bld directory.</p>
<h1><a class="anchor" id="install_inout_in"></a>
In-Source Builds</h1>
<p >In order to compile and build PSCF in-source, one simply invokes the make utility from within the pscfpp/src/ directory, rather than from within the pscfpp/ directory or the pscfpp/bld/ directory. The names of the makefile targets used for this purpose are the same as those used to build out-of-source. Entering the command "make all-cpu" from the pscfpp/src directory will thus perform an in-source build all of CPU programs in the PSCF package, and install the resulting executable files in pscfpp/bin. Entering "make pspg" from pscfpp/src on a machine with a CUDA compiler will compile all GPU enabled executables, which are also installed in pscfpp/bin.</p>
<p >When compiling in-source, the make command can also be invoked from any subdirectory of the src/ directory in order to compile only recently modified files in that subdirectory. This usage, which is provided as a convenience for developers, is discussed in more detail <a class="el" href="install_targets_page.html#install_targets_makeall_sec">here</a>. We recommend an out-of-source build for users who are not actively working on code development and are simply compiling one or more of the PSCF programs unchanged.</p>
<p ><br  />
 <a class="el" href="install_setup_page.html">Setup Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_page.html">Installation</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="install_targets_page.html">Makefile targets</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 28 2023 20:55:58 for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
