<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Out-of-Source and In-Source Builds</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="index.html">PSCF - Polymer Self-Consistent Field</a></li><li class="navelem"><a href="install_page.html">Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Out-of-Source and In-Source Builds </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="install_configure_page.html">Configure Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_setopts_page.html">Compile Time Options</a> (Next) <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="install_inout_build"></a>
Intermediate files and build directories</h1>
<p>All C++ and CUDA header and source files for PSCF are contained within the PSCF src/ directory tree. When the PSCF build system is used to compile a program or set of programs, it generates a large number of intermediate files that are used to construct the executable files, and that are left in place after the executable files have been installed in their final locations. These intermediate files are placed in a directory that we will refer as the "build" directory. The build directory used by PSCF may either be the same as the src/ directory, if the package is built "in-source", or the build directory may be a separate directory, if PSCF is built "out-of-source".</p>
<p>The types of intermediate files that are created when any part of PSCF is compiled include:</p>
<ul>
<li>An object file with a file extension *.o that is associated with each compilable source file. Source files are files with filename extension *.cpp for C++ files or *.cu for files that contain CUDA code. Each such object file is created by compiling the associated source file, and has the same base name as the corresponding source file.</li>
<li>A dependency file with file extension *.d that is associated with each source file. This file is created by the build system by analyzing which header (*.h and *.tpp) files are included directly or indirectly into that source file.</li>
<li>Static library files with extension *.a. Each such library file contains all of the object code generated by compiling the source files in a single subdirectory of the PSCF src/ directory</li>
</ul>
<p>When PSCF is built "in-source", each *.o and *.d file that is created by compiling a source file (extension *.cpp or *.cu) is placed in the same directory as the corresponding source file. When PSCF is built "out-of-source", these *.o and *.d intermediate files are instead placed in an equivalent location in a separate build directory tree with the same directory structure. By default, the PSCF bld/ directory is used as the build directory tree for out-of-source builds.</p>
<p>We refer to the two directories src/ and bld/ in what follows as standard build directories. The bld/ directory has a directory structure analogous to that of the src/ directory. Both src/ and bld/ contain a set of subdirectories named util/, pscf/, r1d/, prdc/, rpc/, and rpg/, which we refer to in what follows as namespace level directories.</p>
<p>By default, all executable program files are installed in the PSCF bin/ directory. This is true for both in-source or out-of-source compilation.</p>
<h1 class="doxsection"><a class="anchor" id="install_inout_out"></a>
Building out-of-source</h1>
<p>We recommend that most users of PSCF who are not working on modifying or extending PSCF build the package out-of source. The overview of instructions given in a <a class="el" href="install_overview_page.html">previous page</a> gives instructions for an out-of-source build. An out-of-source build will be performed if "make all" is entered either from within either the PSCF root directory (as recommended in those instructions) or from within the PSCF bld/ directory.</p>
<h1 class="doxsection"><a class="anchor" id="install_inout_in"></a>
Building in-source</h1>
<p>Users who are actively working on development or modification of the PSCF source code may find it more convenient to build PSCF in-source during development. To build PSCF in-source, one simply invokes the make utility from within the PSCF src/ directory, rather than from within the PSCF root or bld/ directory. The names of the makefile targets used for this purpose are the same as those used to build out-of-source. Entering the command "make all" from the PSCF src/ directory will thus perform an in-source build all of relevant programs in the package, and install the resulting executable files in the PSCF bin/ directory. <br  />
</p>
<p>When PSCF is compiled in-source, the make command can also be invoked from any subdirectory of the src/ directory. Invoking "make all" from any subdirectory of src/ will generally compile all recently modified files in that subdirectory and its subdirectories, without attempting to compile any files outside that subdirectory, and without recompiling files that have not been touched since they were last compiled. This usage is discussed in more detail <a class="el" href="install_targets_page.html#install_targets_makeall_sec">here</a>. <br  />
</p>
<p><br  />
 <a class="el" href="install_configure_page.html">Configure Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_page.html">Installation</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="install_setopts_page.html">Compile Time Options</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
