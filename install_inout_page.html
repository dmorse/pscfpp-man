<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Out-of-Source and In-Source Builds</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">PSCF - Polymer Self-Consistent Field Theory</a></li><li class="navelem"><a class="el" href="install_page.html">Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Out-of-Source and In-Source Builds </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="el" href="install_setup_page.html">Setup Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_configure_page.html">Optional Features</a> (Next) <br  />
</p>
<h1><a class="anchor" id="install_inout_build"></a>
Intermediate Files and Build Directories</h1>
<p >All C++ and CUDA header and source files for PSCF are contained in within the pscfpp/src/ directory tree. When the PSCF build system is used to compile a program or set of programs, it generates a large number of intermediate files that are used to construct the executable files, and that left in place after the executable files have been installed in their final locations. These intermediate files are placed in a directory that we will refer as the "build" directory. The build directory used by PSCF may either be the same as the src/ directory, if the package is built "in-source", or the build directory may be a separate directory, if PSCF is built "out-of-source"</p>
<p >The types of intermediate files that are created when any part of PSCF is compiled include:</p>
<ul>
<li>An object file with a file extension *.o that is associated with each compilable source file. Source files are files with filename extension *.cpp for C++ files or *.cu for files that contain CUDA code. Each such object file is created by compiling the associated source file, and has the same base name as the corresponding source file.</li>
<li>A dependency file with file extension *.d that is associated with each source file. This file is created by the build system by analyzing which header (*.h and *.tpp) files are included directly or indirectly into that source file.</li>
<li>Static library files with extension *.a. Each such library file contains all of the object code generated by compiling the source files in a single subdirectory of pscfpp/src.</li>
</ul>
<p >When PSCF is built "in-source", each *.o and *.d file that is created by compiling a source file (extension *.cpp or *.cu) is placed in the same directory as the corresponding source file. When PSCF is built "out-of-source", these *.o and *.d intermediate files are instead placed in an equivalent location in a separate build directory tree with the same directory structure. By default, the directory pscfpp/bld is used as the build directory tree for out-of-source builds.</p>
<p >We refer to the two directories src/ and bld/ in what follows as standard build directories. The bld/ directory has a directory structure analogous to that of the src/ directory. Both src/ and bld/ contain a set of subdirectories named util/, pscf/, fd1d/, pspc/, and pspg/, which we refer to in what follows as namespace level directories.</p>
<p >By default, all executable program files are installed in the pscfpp/bin directory. This is true for both in-source or out-of-source compilation.</p>
<h1><a class="anchor" id="install_inout_out"></a>
Out-of-Source Builds</h1>
<p >We recommend that most users of PSCF who are not working on modifying or extending the code build the package out-of source. The overview of instructions given in a <a class="el" href="install_overview_page.html">previous page</a> gives instructions for an out-of-source build. An out-of-source build will be performed if "make all" is entered either from within either the root pscfpp/ directory (as recommended in those instructions) or from within the pscfpp/bld directory.</p>
<h1><a class="anchor" id="install_inout_in"></a>
In-Source Builds</h1>
<p >Users who are actively working on development or modification of the PSCF source code may find it more convenient to build PSCF in-source during development. To build PSCF in-source, one simply invokes the make utility from within the pscfpp/src/ directory, rather than from within the pscfpp/ or pscfpp/bld/ directory. The names of the makefile targets used for this purpose are the same as those used to build out-of-source. Entering the command "make all" from the pscfpp/src directory will thus perform an in-source build all of relevant programs in the package, and install the resulting executable files in pscfpp/bin. <br  />
</p>
<p >When PSCF is compiled in-source, the make command can also be invoked from any subdirectory of the src/ directory. Invoking "make all" from any subdirectory of src/ will generally compile all recently modified files in that subdirectory and its subdirectories, without attempting to compile any files outside that subdirectory, and without recompiling files that have not been touched since they were last compiled. This usage is discussed in more detail <a class="el" href="install_targets_page.html#install_targets_makeall_sec">here</a>. <br  />
</p>
<p ><br  />
 <a class="el" href="install_setup_page.html">Setup Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_page.html">Installation</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="install_configure_page.html">Optional Features</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 20 2023 00:52:46 for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
