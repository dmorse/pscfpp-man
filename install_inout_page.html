<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: 2.6 Compiling Out-of-Source vs. In-Source</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v0.9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">PSCF - Polymer Self-Consistent Field Theory</a></li><li class="navelem"><a class="el" href="install_page.html">2 Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">2.6 Compiling Out-of-Source vs. In-Source </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="el" href="install_setup_page.html">2.5 Setup Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_targets_page.html">2.7 Makefile targets</a> (Next) <br  />
</p>
<h1><a class="anchor" id="install_inout_build"></a>
Intermediate Files and Build Directories</h1>
<p >When the PSCF makefile system compiles any program, it generates several types of intermediate files before constructing the final executable program file. These files include an object file generated by compiling each source file (file extension *.o), a dependency file generated by analyzing each source file (extension *.d), and several static libraries (extension *.a). During compilation, all of these intermediate generated files are placed in a directory that we will refer as the "build" directory.</p>
<p >All C++ source code files for PSCF are contained in the pscfpp/src/ directory. The build directory used by PSCF may either be the same as the src/ directory or it may be separate directory, depending on whether the code is compiled "in-source" or "out-of-source". When PSCF is compiled "in-source", each *.o and *.d file created by compiling a *.cpp source file is placed in the same directory as the corresponding source file. When code is built "out-of-source", these generated files are instead placed in an equivalent location in a separate build directory tree. By default, pscfpp/bld is used as the build directory tree for out-of-source builds. All executable program files are installed in the pscfpp/bin directory, for either in-source or out-of-source compilation.</p>
<p >We refer to the two directories src/ and bld/ in what follows as standard build directories. The bld/ directory has a directory structure analogous to that of the src/ directory. Both src/ and bld/ contain a set of subdirectories named util/, pscf/, fd1d/, pspc/, and pspg/, which we refer to in what follows as namespace level directories.</p>
<h1><a class="anchor" id="install_inout_out"></a>
Out-of-Source Compilation</h1>
<p >We recommend that most users compile PSCF out-of source. The overview of instructions given in a <a class="el" href="install_overview_page.html">previous page</a> were instructions for performing an out-of-source build. An out of out-of-source build will be performed if commands "make all-cpu" and "make pspg" are invoked from either the root pscfpp/ directory (as recommended in those instructions) or from the pscfpp/bld directory.</p>
<h1><a class="anchor" id="install_inout_in"></a>
In-Source Compilation</h1>
<p >In order to compile PSCF in-source, one simply invokes the make utility from within the pscfpp/src/ directory, rather than from within the pscfpp/ or pscfpp/bld/ directory. The names of the makefile targets used for this purpose are the same as those used to compile out-of-source. Entering the command "make all-cpu" from the pscfpp/src directory will thus perform an in-source compilation all of CPU programs in the PSCF package, and install the resulting executable files in pscfpp/bin. Entering "make pspg" from pscfpp/src on a machine with a CUDA compiler will compile all GPU enabled executables, which are also installed in pscfpp/bin.</p>
<p >When compiling in-source, the make command can also be invoked from any subdirectory of the src/ directory in order to compile only recently modified files in that subdirectory. This usage is discussed in more detail <a class="el" href="install_targets_page.html#install_targets_makeall_sec">here</a>. The main advantage of in-source compilation is that it can be convenient for developers to be able to repeatedly compile a file or a small group of closedly related files on which they are working without leaving the working directory containing that file or files. We recommend out-of-source compilation for users who are not actively working on code development and are simply compiling one or more of the PSCF programs unchanged.</p>
<p ><br  />
 <a class="el" href="install_setup_page.html">2.5 Setup Script</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_page.html">2 Installation</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="install_targets_page.html">2.7 Makefile targets</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 26 2022 14:10:42 for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
