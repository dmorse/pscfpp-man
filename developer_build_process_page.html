<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Build Process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="index.html">PSCF - Polymer Self-Consistent Field</a></li><li class="navelem"><a href="developer_page.html">Developer Information</a></li><li class="navelem"><a href="developer_build_page.html">Build System</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Build Process </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="developer_build_page.html">Build System</a> (Prev/Up) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_compile_page.html">Basics: Compiling</a> (Next) <br  />
</p>
<p>PSCF is compiled using a system of unix makefiles. This page gives an overview of the build process, i.e., the process of compiling the PSCF source code and creating executable files. The discussion given here and in subsequent pages assumes familiarity with discussion of the PSCF directory structure given in a <a class="el" href="developer_directory_page.html">previous page</a> .</p>
<p>Compilation and installation of PSCF involves the following operations:</p>
<ul>
<li>Compiling all source files in the src directory</li>
<li>Creating a static library files for each namespace-level subdirectory of the src directory</li>
<li>Creating the executable files pscf_1d, pscf_pc, and pscf_pg and installing them (by default) in the bin directory</li>
</ul>
<p>All files in the PSCF repository that contain C++ or CUDA C++ code are located in the src directory tree. Files with file name extension *.cpp or *.cu are compiled by the build system, and are referred to here as either compilable source files or simply source files. When each such source file is compiled, the build system creates two associated files that we refer to as an object file and a dependency file:</p>
<ul>
<li>An object file is a file with file name extension .o that contains the object code created by compiling the associated source file.</li>
<li>A dependency file is a makefile fragment with file name extension .d that contains a lists of all the the prerequisites of the associated object file.</li>
</ul>
<p>The object and dependency file that are created by compiling a source file have the same base file name as the associated source file, with different file name extensions.</p>
<p>Each dependency file contains a list of paths to files that are "prerequisites" of the corresponding object file. This list includes the associated source file and all other C++ files (e.g., header files) that are directly or indirectly included into the source file via preprocessor "include" statements. This list of prerequisites is used by the PSCF build system to keep track of when an existing object file has become out-of-date due to modifications of one or more prerequisite files.</p>
<p>The PSCF build system also creates a static library with file name extension .a in each namespace-level subdirectory of the src directory. Each such library contains all of the object code this is created by compiling the source files in the corresponding namespace-level subdirectory of src. The name of each library file is given by a prefix "lib", followed by the name of the associated namespace-level directory, followed by a suffix ".a". For example, the file "librpc.a" is a library file in the src/rpc directory that contains the contents of all of the object files that are created by compiling source files in the src/rpc namespace level directory.</p>
<p>The object (*.o), dependency (*.d), and library (*.a) files that are created during the build process are referred to collectively as "intermediate" files. The directory in which all such intermediate files are placed is referred to as the build directory.</p>
<p>The PSCF makefile system is designed to allow a user to perform either an "out-of-source" build or an "in-source" build. In an "out-of-source" build, all intermediate files are placed in a build directory that is distinct from the src directory. By default, PSCF uses the bld subdirectory of the PSCF root directory as the build directory for out-of-source builds. In an "in-source" build, these intermediate files are instead placed within the src directory.</p>
<p>During an in-source build, the PSCF build system places the *.o object file and the *.d dependency file that are created by compiling each source file in the same subdirectory of src as the associated source (*.cpp or *.cu) file. During an out-of-source build, these two files are instead placed in an analogous subdirectory of the bld directory tree. To make this possible, the bld directory has an internal directory structure analogous to that of the src directory.</p>
<p>The library file that contains object code created by compiling all the source files in a namespace level directory of the src directory is placed in the root of the corresponding namespace level directory of the build directory. The file librpc.a is thus placed in the bld/rpc directory during an out-of-source build or in src/rpc during an in-source build.</p>
<p>The three program-level subdirectories of the src directory (named r1d, rpc, and rpg) each have a source file that contains the main program function for one of the three PSCF programs. The base name of this file is the same as the name of the corresponding executable file. For example, the main program source file in src/rpc is named <a class="el" href="pscf__pc_8cpp_source.html">pscf_pc.cpp</a>, which is used to create the executable file named pscf_pc. Whe the code in one of these three program-level directories of the build directory is compiled, the build system first compiles all the source files other than the main program file, creates a static library containing the resulting object files, then compiles the main program file, links it to all relevant library files to create an executable, and (by default) installs the resulting executable file in the PSCF bin directory.</p>
<p><br  />
 <a class="el" href="developer_build_page.html">Build System</a> (Prev / Up) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_compile_page.html">Basics: Compiling</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
