<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Directory Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="index.html">PSCF - Polymer Self-Consistent Field</a></li><li class="navelem"><a href="developer_page.html">Developer Information</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Directory Structure </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="developer_build_page.html">Build System</a> (Next) <br  />
</p>
<p>This page provides a description of the directory structure of the PSCF repository, focusing on the contents of the src directory.</p>
<p>A user's local copy of the PSCF repository is normally created by <a class="el" href="install_source_page.html#source_getcode_sec">cloning project dmorse/pscfpp</a> from github.com. The required git clone command should use use the &ndash;recursive option to download and install the contents of two other github repositories into subdirectories as <a class="el" href="install_source_page.html#source_submodules_sec">git submodules</a>. By default, this operation creates a directory named pscfpp as a subdirectory of the directory from which the git clone command was issued. In what follows, we refer to the resulting directory, which contains the contents of the entire PSCF repository, as the PSCF root directory.</p>
<p>The PSCF root directory can be renamed or moved by the user after it is created. If a user does so, however, they must then run or rerun the <a class="el" href="install_configure_page.html">configure</a> script in order to allow this script to assign new values for some makefile variables that contains absolute paths to the PSCF root directory and some of its subdirectories, as discussed <a class="el" href="developer_build_config_page.html">elsewhere</a>.</p>
<p>In what follows, we describe file name patterns and standard file extension using the * (asterisk) symbol to represent a wildcard that can represent any string of characters. For example, the pattern *.h can represent any file name that ends in extension .h, which is a standard file name extension for C++ header files. We sometimes also use this as as a shorthand to refer to types of file, thus referring to files with names that end with a suffix .h as *.h files, for example.</p>
<h1 class="doxsection"><a class="anchor" id="developer_directory_summary_sec"></a>
PSCF root directory</h1>
<p>The names and purposes of all of the top-level subdirectories of the PSCF root directory are given briefly below:</p>
<table class="doxtable">
<tr>
<th>Directory </th><th>Purpose </th></tr>
<tr>
<td>src </td><td>Contains all C++ and CUDA C++ source code </td></tr>
<tr>
<td>bld </td><td>Build directory for out-of-source builds </td></tr>
<tr>
<td>bin </td><td>Default installation location for executable files </td></tr>
<tr>
<td>lib </td><td>Source code for interpreted languages (python and bash) </td></tr>
<tr>
<td>docs </td><td>Documentation, including source pages for web manual </td></tr>
<tr>
<td>examples </td><td>Examples input files for a variety of calculations </td></tr>
<tr>
<td>data </td><td>Read-only data, such as lists of space group symmetry elements </td></tr>
<tr>
<td>make </td><td>Files used only by the "configure" script </td></tr>
</table>
<h1 class="doxsection"><a class="anchor" id="developer_directory_src_sec"></a>
Source file (src) directory</h1>
<p>The src directory contains all of the C++ and CUDA C++ source code files for PSCF. The structure of subdirectories of src reflects the organization of entities defined in the source code (i.e., classes and functions) into several C++ namespaces.</p>
<p><b>C++ namespaces:</b></p>
<p>The source code for PSCF is divided between two top-level C++ namespaces, named <a class="el" href="namespaceUtil.html" title="Utility classes for scientific computation.">Util</a> and <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a>.</p>
<p>The <a class="el" href="namespaceUtil.html" title="Utility classes for scientific computation.">Util</a> namespace contains a collection of general utilities for scientific computation that are also used by projects other than PSCF. The code is maintained in a separate github repository (project dmorse/util) and imported into the pscfpp repository as a git submodule. All source code files for entities that are defined in the <a class="el" href="namespaceUtil.html" title="Utility classes for scientific computation.">Util</a> namespace are located in the src/util directory.</p>
<p>The <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a> namespace contains all of source code files that are contained in the dmorse/pscfpp github repository, all of which are specific to the PSCF package. The <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a> namespace contains several enclosed sub-namespaces. All source code for each such enclosed namespace is located within a specific subdirectory of the src directory, as discussed below.</p>
<p><b>Namespace-level directories:</b></p>
<p>The src directory contains six subdirectories that each contain source code defined in a specific C++ namespace. These six directories will be referred to in what follows as "namespace" level subdirectories of src. These six namespace-level subdirectories are listed below:</p>
<table class="doxtable">
<tr>
<th>Subdirectory</th><th>Namespace</th><th>Purpose</th></tr>
<tr>
<td>util </td><td><a class="el" href="namespaceUtil.html" title="Utility classes for scientific computation.">Util</a> </td><td>General utilities </td></tr>
<tr>
<td>pscf </td><td><a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a> </td><td>Code defined directly in <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a>, used by all PSCF programs </td></tr>
<tr>
<td>prdc </td><td><a class="el" href="namespacePscf_1_1Prdc.html" title="Periodic fields and crystallography.">Pscf::Prdc</a> </td><td>Code for periodic structures, used by pscf_pc and pscf_pg programs </td></tr>
<tr>
<td>r1d </td><td><a class="el" href="namespacePscf_1_1R1d.html" title="SCFT with real 1D fields.">Pscf::R1d</a> </td><td>Code used only by the pscf_1d program </td></tr>
<tr>
<td>rpc </td><td><a class="el" href="namespacePscf_1_1Rpc.html" title="Real periodic fields, SCFT and PS-FTS (CPU).">Pscf::Rpc</a> </td><td>Code used only by the pscf_pc CPU program for periodic structures </td></tr>
<tr>
<td>rpg </td><td><a class="el" href="namespacePscf_1_1Rpg.html" title="SCFT and PS-FTS with real periodic fields (GPU)">Pscf::Rpg</a> </td><td>Code used only by the pscf_pg GPU program for periodic structures </td></tr>
</table>
<p>The src/pscf directory contains files that contain code for class and functions that are defined directly in the <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a> namespace, rather than in one of the enclosed sub namespaces of <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a>. The src/prdc, src/r1d, src/rpc, and src/rpg instead each contain code for entities that are defined in a specific sub-namespace of <a class="el" href="namespacePscf.html" title="PSCF package top-level namespace.">Pscf</a>.</p>
<p>The PSCF makefile system constructs a static library in each of these six namespace level directories. Each static library file is a file with a name of the form lib[namespace].a, where [namespace] represents the name of the relevant subdirectory. For example, the build system creates a library file named libprdc.a in the src/prdc directory.</p>
<p><b>Program-level namespaces and directories:</b></p>
<p>The <a class="el" href="namespacePscf_1_1R1d.html" title="SCFT with real 1D fields.">Pscf::R1d</a>, <a class="el" href="namespacePscf_1_1Rpc.html" title="Real periodic fields, SCFT and PS-FTS (CPU).">Pscf::Rpc</a> and <a class="el" href="namespacePscf_1_1Rpg.html" title="SCFT and PS-FTS with real periodic fields (GPU)">Pscf::Rpg</a> namespaces and the corresponding r1d, rpc and rpg subdirectories of src each contain code is only used to construct one executable program. These three namespaces and corresponding directories are referred to hereafter as program-level namespaces and program-level directories, respectively. Subdirectory r1d contains code that is only used by pscf_1d, rpc contains code that is only used by pscf_pc, and rpg contains code that is only used by pscf_pg. By convention, code defined in one program-level PSCF namespace may not use entities such classes or functions that are defined in any other namespace-level namespace.</p>
<p>Each of these three program-level directories contains a program file that defines the main function for the associated program. The base name of each such file is the same as the executable name, followed by a suffix .cpp or .cu. For example, the main function for program pscf_1d is defined in the file <a class="el" href="pscf__1d_8cpp.html">src/r1d/pscf_1d.cpp</a>.</p>
<p>Subdirectories util, pscf and prdc are namespace-level directories that are not program-level directories. These contain code for classes and functions that can be used in more than program, and do not contain any program files.</p>
<p><b>Dependencies among namespace level directories:</b></p>
<p>PSCF imposes a set of rules for dependencies among the various namespace level directories. A namespace level directory named A is said to <b>depend</b> on another such directory named B if source code files in directory A are allowed to use named entities (i.e., classes, class templates, functions, etc.) that are defined by files in directory B. The following table lists the directories that each of the namespace level directories depend upon in this sense: </p><table class="doxtable">
<tr>
<th>Subdirectory</th><th>Dependencies </th></tr>
<tr>
<td>util </td><td>(None) </td></tr>
<tr>
<td>pscf </td><td>util </td></tr>
<tr>
<td>prdc </td><td>pscf, util </td></tr>
<tr>
<td>r1d </td><td>pscf, util </td></tr>
<tr>
<td>rpc </td><td>prdc, pscf, util </td></tr>
<tr>
<td>rpg </td><td>prdc, pscf, util </td></tr>
</table>
<p>Note that every directory other than util depends on util, and every directory other than util and pscf depends on both util and pscf. These two directories thus contain code that is available for use through the PSCF source code. The prdc directory contains code that is only used in the pscf_pc and pscf_pg programs for systems with periodic boundary conditions, and so is listed as a dependency of the rpc and rpg directories. None of the three program-level directories (r1d, rpc, and rpg) depends on any other program-level directories</p>
<p><b>Unit test directories:</b></p>
<p>In addition to these namespace level subdirectories, the src directory has one additional top-level subdirectory named "test". This directory contains files that define a C++ unit test framework used throughout PSCF to construct unit tests. This framework is defined using only header (*.h) files, and thus does not need to be compiled or linked. The unit test framework used by PSCF is maintained on github in a separate repository (dmorse/test) and is imported into the src/test directory of the PSCF repository as a submodule.</p>
<p>Each of the six namespace level subdirectories of the src directory also contains a subdirectory named "tests" that contains unit tests for classes and functions defined in the associated namespace. These unit tests are not automatically compiled or run by the makefile targets that build the PSCF executable programs.</p>
<p>All of the PSCF unit tests can be compiled and run by changing directory to the desired build directory (src or bld) and entering the command </p><div class="fragment"><div class="line">make test</div>
</div><!-- fragment --><p> All of the tests associated with any single namespace level directory can be compiled and run by changing directory to the corresponding tests subdirectory within that namespace directory in the relevant build directory (i.e., within a namespace level subdirectory of the bld directory for an out-of source build, or within a namespace level subdirectory of src for an in-source-build) and entering </p><div class="fragment"><div class="line">make run</div>
</div><!-- fragment --><p> from within that subdirectory.</p>
<h1 class="doxsection"><a class="anchor" id="developer_directory_filetypes_sec"></a>
File Types</h1>
<p>The src directory contains several different types of file, as discussed below.</p>
<p><b>Source code file types:</b></p>
<p>All C++ code files associated with a given class or set of functions are placed in the same directory and have the same base name, with different file name extensions. The name of a file that contains C++ code for a single class or class template almost always has a base name that is same as the class name, with a file name extension that indicates the file type. All namespace and class names upper space camel capitalization, in which the first letter of each word in a name is capitalized.</p>
<p>PSCF uses the following file name extensions for C++ and CUDA C++ files:</p>
<table class="doxtable">
<tr>
<th>Pattern </th><th>Purpose </th></tr>
<tr>
<td>*.h </td><td>C++ header file </td></tr>
<tr>
<td>*.tpp </td><td>implementation of a class template </td></tr>
<tr>
<td>*.cpp </td><td>compilable C++ source file </td></tr>
<tr>
<td>*.cu </td><td>compilable CUDA C++ source file </td></tr>
</table>
<p>Header files, with extension .h, may be included into other C++ files using a C/C++ preprocessor #include directive. C++ and CUDA C++ source files with extension .cpp or .cu are compiled, and may never be included by other program files.</p>
<p>Template implementation files, with extension .tpp, usually contain definitions of non-inline member functions of a class template, much like the compilable source file for a non-template class. These files are almost always included either into an associated *.h header file (for standard class templates that rely on implicit instantiation) or into an associated *.cpp or *.cu source file with the same base name (for class templates that are compiled by explicit instantiation), as discussed in detail developer_template_page "here". Template implementation files should generally not be directly included into other source code files.</p>
<p>Compilable source files that contain or include only standard C++ code may be given file extension .cpp. Compilable source files that contain or include any CUDA C++ code must instead use file extension .cu. Different makefile pattern rules are used to compile files with filename extension .cpp and .cu, using different compilers, using the NVIDIA nvcc compiler to compile files with file extension .cu.</p>
<p><b>Build system files types:</b></p>
<p>The PSCF build system is based on the unix make command, and uses several types of file that are placed in the src directory. The following table list two types of file that are part of this build system: </p><table class="doxtable">
<tr>
<th>Pattern </th><th>Purpose </th></tr>
<tr>
<td>makefile </td><td>makefile (instructions for the make command)</td></tr>
<tr>
<td>*.mk </td><td>makefile fragment (included by other makefiles)</td></tr>
</table>
<p>Immediately after the PSCF repository is cloned, almost every subdirectory of the src directory will contain a makefile and a makefile fragment named sources.mk. Each namespace-level directories of src will also contain several additional makefile fragments named patterns.mk and include.mk.</p>
<p>After the configure script is run, the src and bld directory will each contain an additional makefile fragment named config.mk, and the bld directory and each namespace-level subdirectory of the build directory will also contain a makefile.</p>
<p>The PSCF build system is discussed in detail on the <a class="el" href="developer_build_page.html">following page</a>.</p>
<p><b>Documentation files types:</b></p>
<p>The web manual for PSCF is constructed using the doxgen documentation utility. This utility extracts API documentation from source code files, but also incorporates manual pages that are placed in separate files.</p>
<p>Files that contain the contents of a web manual page have file names that end with file name extension .dox. The main manual pages are *.dox files that are located in the docs/manual directory. Some other files that are used by doxygen also appear in the src/ directory alongside the source code files.</p>
<p>The following two file name extensions are used for files that are used by doxygen to construct a web manual: </p><table class="doxtable">
<tr>
<th>Pattern </th><th>Purpose </th></tr>
<tr>
<td>*.dox </td><td>doxygen web manual page </td></tr>
<tr>
<td>*.mod </td><td>doxygen topic module definition </td></tr>
</table>
<p>Each files with file name extension .mod defines one of the doxygen "Topic" modules that is used to create the hierarchical presentation of class API documentation that is accessible via the "Topics" tab at the top of every web manual page.</p>
<p>Most of the *.dox files that appear in the src directory contain the contents manual pages that provide additional information for users about a particular class or class template. The name of a file that contains the content of such a manual page usually has a prefix that is the same the name of the class or class template (which is also used as a prefix for the associated source code files) followed by a suffix .dox. Each such web manual page usually describe the syntax of the parameter file block associated with a class, and may also provide information about algorithm or mathematical conventions that a user would need to understand in order to write the parameter file block and choose appropriate values for parameters. The resulting user-oriented web manual pages do not contain the API documentation that is extracted from comments in the source code, which doxygen uses to create a separate API documentation page for each class or class template. The user documentation page and the API documentation page for each class or class template are usually accessible to one another via html links.</p>
<p><br  />
 <a class="el" href="developer_page.html">Developer Information</a> (Up / Prev) &#160; &#160; &#160; &#160; <a class="el" href="developer_build_page.html">Build System</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
