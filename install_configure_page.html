<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PSCF: 2.9 Optional Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSCF
   &#160;<span id="projectnumber">v1.50</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">PSCF - Polymer Self-Consistent Field Theory</a></li><li class="navelem"><a class="el" href="install_page.html">2 Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">2.9 Optional Features </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="install_targets_page.html">2.7 Makefile targets</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_doc_page.html">2.10 Generating Documentation</a> (Next) <br />
</p>
<h1><a class="anchor" id="install_configure_build_directories_section"></a>
Build configuration files</h1>
<p>The directories src/ and bld/ contain similar directory structures, and similar sets of makefiles and makefile fragments. In what follows, we will refer src/ and bld/ generically as build directories. Both of these directories contains a set of five subdirectories named util/, pscf/, fd1d/, pscpc/, and pspg/ that each contain C++ source files from a single C++ namespace. We refer to these top-level subdirectories of bld/ and src/ as "namespace-level" subdirectories.</p>
<p>The setup script installs a set of makefiles and makefile fragments in each build directory. After setup (i.e., after the setup script has been run), each build directories will contain a set of 6 makefile fragments that we refer to as configuration files. The build configuration files all files named "config.mk" that are located either in the root of the build directory (i.e., in src/ or bld/) or in one the 5 namespace-level subdirectories of the build directory. These 6 configuration files are included by other makefiles during compilation process.</p>
<p>The config.mk file in the root directory of the build directory tree (e.g., in the src/ directory) is the main build configuration file. This file controls the choice of compiler and general options that are applied to all code. The config.mk files in the namespace level control more specialized options that are only relevant for code in specific namespaces. The six config.mk files in each build directory together specify the configuration of any code compiled in that directory.</p>
<p>The build configuration files in each build directory are installed by the setup script, and are not stored in the pscfpp repository. This is done so that users may edit these files without destroying synchronization with the repository. Users may change the configuration of code built in a particular build directory after running the setup script but before compiling either by editing these configuration files. Some changes to these files can also be made from the command line by using the configure script, as discussed below.</p>
<h1><a class="anchor" id="install_configure_configure"></a>
The "configure" script</h1>
<p>The root pscfpp/ directory and the three standard build directories (bld/parallel, bld/serial or src/) each contain a unix bash script named "configure" that can be used to enable or disable particular compile time features. The configure script in each build directory must be invoked from the root directory of the build directory tree (i.e., the directory that contains the script), and can be used enable or disable features of code built in that build directory, without effecting code built elsewhere.</p>
<p>The use of a configure script is one of many features of pscfpp that is borrowed from the "simpatico" molecular dynamics simulation package. Simpatico has many optional compile-time features that can be enabled or disabled prior to compilation by invoking the configure script with corresponding command line options. The only optional feature of the programs of the pscfpp package is current the option to enable extra debugging sanity checks. The use of a script to enable and disable a single option is arguably overkill, but we have provided script to provide a mechanism for manipulating any future compile-time options.</p>
<h2><a class="anchor" id="install_configure_query_sub"></a>
The "query" option</h2>
<p>The -q command line option of a configure script may be used to query which optional features are currently set to be enabled or disabled, and the current values of variables that specify the choice of compiler and environment. To see how this works, after the setup script has been run, changed directory (cd) to the bld/serial directory and then enter </p><div class="fragment"><div class="line">&gt; ./configure -q</div></div><!-- fragment --><p> The -q command line option cause the script to print a list of which optional features are currently enabled, and the name of the current choice of compiler. The resulting output for the default configuration should look something like this: </p><div class="fragment"><div class="line">-d  OFF - debugging</div></div><!-- fragment --><p> if debugging is disabled (the default configuration), or </p><div class="fragment"><div class="line">-d  ON - debugging</div></div><!-- fragment --><h2><a class="anchor" id="install_configure_help_sub"></a>
The "help" option</h2>
<p>If the configure script is invoked with the -h ("help") option, by entering </p><div class="fragment"><div class="line">&gt; ./configure -h</div></div><!-- fragment --><p> this will cause list of all command line options accepted by the configure script to be printed to the terminal. The output also includes some information about what C++ preprocessor macros are defined or undefined by specific commands.</p>
<h2><a class="anchor" id="install_configure_change_sub"></a>
Enabling/disabling optional features</h2>
<p>In the output produced by invoking configure with the -q option, each line of the output before the last two begins with the name of the command line option for the configure script (a dash followed by a letter) that can be used to enable or disable an associated feature. This information is also output by the invoking configure with -h option. The "debugging" feature is enabled or disabled using the "-d" option. Each compile-time feature can be enabled by using the associated command line option followed by "1" (ON), or disabled by using the option followed by "0" (OFF), and then compiling or recompiling the desired programs.</p>
<p>For example, to enable debugging (which enables extensive run-time sanity checks, at a slight cost in speed) in code built in one build directory, one would enter </p><div class="fragment"><div class="line">&gt; ./configure -d1</div></div><!-- fragment --><p> from the root of the relevant build directory (i.e., from src/ or bld/). To disable debugging before compiling, one would instead enter </p><div class="fragment"><div class="line">&gt; ./configure -d0</div></div><!-- fragment --><p> These and any other desired changes in compile-time configuration must be made before invoking make to compile a program.</p>
<h1><a class="anchor" id="install_configure_features"></a>
Optional features</h1>
<p>The following table lists information about the most important compile time options. The configure script enables or disables each such optional feature by commenting out or uncommenting the definition of a particular makefile variable that is defined (or not) within a particular config.mk configuration file within the relevant build directory. Each row of the table lists (in order):</p>
<ul>
<li>description: description of the feature</li>
<li>option: the associated command line option for the configure script</li>
<li>default: whether the feature is ON or OFF by default</li>
<li>variable: the name of the associated makefile variable</li>
<li>file: path to the config.mk configuration file that contains the definition of the makefile variable.</li>
</ul>
<p>All paths to configuration files are given relative to the root of the build directory. The file name "config.mk" thus refers to the main configuration file in the root directory of a build directory, while</p>
<p>The optional features are: </p><table class="doxtable">
<tr>
<td><b>description</b>  </td><td><b>option </b>  </td><td><b>default </b>  </td><td><b>variable</b>  </td><td><b>file </b>   </td></tr>
<tr>
<td>Debugging - additional error checks  </td><td>-d  </td><td>OFF  </td><td>UTIL_DEBUG  </td><td>config.mk   </td></tr>
</table>
<p><br />
 <a class="el" href="install_targets_page.html">2.7 Makefile targets</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_page.html">2 Installation</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="install_doc_page.html">2.10 Generating Documentation</a> (Next) </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 25 2020 17:49:33 for PSCF by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
