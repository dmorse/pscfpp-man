<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Optional Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">PSCF - Polymer Self-Consistent Field Theory</a></li><li class="navelem"><a class="el" href="install_page.html">Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Optional Features </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="el" href="install_targets_page.html">Makefile targets</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_doc_page.html">Generating Documentation</a> (Next) <br  />
</p>
<p >The PSCF build system is designed to allow users to enable or disable conditional compilation of optional features during compilation. Thus far, the only such optional feature is the "debugging" feature that is used to add additional run-time sanity checks (such as run-time checking of array index bounds) at a slight cost in performance. The system used to enable and disable this feature is designed to be flexible enough to allow later additional of other optional features.</p>
<h1><a class="anchor" id="install_configure_configure"></a>
The "configure" script</h1>
<p >The pscfpp/src and pscfpp/bld directories are used as build directories for in-source and out-of source compilation, respectively. After the setup script has been run, each of these two standard build directories will contain a unix bash script named "configure". The configure script can be used to modify configuration files that control what features are enabled when code is compiled. The configure script in each build directory must be invoked from the directory that contains the script (which is the root of the src/ or bld/ directory tree) before invoking the "make" utility to actually compile code.</p>
<h2><a class="anchor" id="install_configure_change_sub"></a>
Enabling or disabling debugging</h2>
<p >The "debugging" feature is enabled or disabled by invoking configure script with the "-d" option with an option parameter "1" to enable or "0" to disable, before compiling source code. To enable debugging in the code built in one build directory one would enter </p><div class="fragment"><div class="line">./configure -d1</div>
</div><!-- fragment --><p> from the root of the relevant build directory (i.e., from src/ or bld/). To disable debugging before compiling, one would instead enter </p><div class="fragment"><div class="line">./configure -d0</div>
</div><!-- fragment --><p> These commands change the configuration used during compilation, and so must be invoked before compiling any relevant source code.</p>
<h2><a class="anchor" id="install_configure_query_sub"></a>
The "query" option</h2>
<p >The -q command line option of the configure script may be used to query what optional features are currently set to be enabled or disabled the next time the code is compiled. To see how this works, changed directory (cd) to the bld/serial directory and then enter </p><div class="fragment"><div class="line">./configure -q</div>
</div><!-- fragment --><p> This should result in the output </p><div class="fragment"><div class="line">-d  OFF - debugging</div>
</div><!-- fragment --><p> if debugging is disabled (the default configuration), or </p><div class="fragment"><div class="line">-d  ON - debugging</div>
</div><!-- fragment --><p> if debugging has been enabled.</p>
<h2><a class="anchor" id="install_configure_help_sub"></a>
The "help" option</h2>
<p >Invoking the configure script with the -h ("help") option, by entering </p><div class="fragment"><div class="line">./configure -h</div>
</div><!-- fragment --><p> produces a list list of all command line options accepted by the script.</p>
<h1><a class="anchor" id="install_configure_build_directories_section"></a>
Build configuration files</h1>
<p >The configuration of the build system is actually defined by the contents of a set of files named "config.mk" in the src/ and bld/ directories. These files, which we refer to as build configuration files, are makefile fragments that are included by other makefiles during the build process. The configure script works by editing the build configuration files. Users may also edit these files directly if they are comfortable doing so.</p>
<p >The directories src/ and bld/ contain analogous directory structures, and similar sets of build configuration files. In what follows, we will refer to src/ and bld/ generically as build directories. Both of these directories contains a set of five subdirectories named util/, pscf/, fd1d/, pscpc/, and pspg/ that each contain C++ source files from a single C++ namespace. We refer to these top-level subdirectories of bld/ and src/ as "namespace-level" subdirectories.</p>
<p >After the setup script has been run, each build directory will contain 6 build configuration files files named "config.mk", with one in the root of the build directory (i.e., in src/ and bld/) and one in each of the 5 namespace-level subdirectories of that directory. The config.mk file in the root directory of each build directory tree is the main build configuration file for code built in that directory. This file controls the choice of compiler and general options that are applied to all code. The config.mk files in the namespace level directories specify more specialized options that are only relevant for code in specific namespaces. The six config.mk files in each build directory together specify the configuration of any code that is compiled in that directory tree.</p>
<p ><br  />
 <a class="el" href="install_targets_page.html">Makefile targets</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="install_page.html">Installation</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="install_doc_page.html">Generating Documentation</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 15 2023 22:38:40 for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
