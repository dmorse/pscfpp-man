<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF: Test Framework Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSCF<span id="projectnumber">&#160;v1.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="index.html">PSCF - Polymer Self-Consistent Field</a></li><li class="navelem"><a href="developer_page.html">Developer Information</a></li><li class="navelem"><a href="developer_test_page.html">Unit Tests</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Test Framework Usage </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="developer_test_design_page.html">Test Framework Design</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="developer_test_organization_page.html">Unit Test Organization</a> (Next) <br  />
</p>
<p>Three simple programs that illustrate usage of the test framework are given in the test/examples/ subdirectory. The basic usage pattern is also described below:</p>
<h1 class="doxsection"><a class="anchor" id="developer_test_usage_unittest"></a>
Writing a Unit Test Class</h1>
<p>A unit test class is a class that is derived from <a class="el" href="classUnitTest.html" title="UnitTest is a base class for classes that define unit tests.">UnitTest</a>, and that contains one or more test functions. Each test function must takes no arguments and must have a void return value. Test functions can be named whatever you wish.</p>
<p>Each test function must use the TEST_ASSERT(expr) macro to assert the truth of one or more logical expressions. If the argument of any TEST_ASSERT macro in a test function is false, the test associated with that function fails.</p>
<p>Below, we an example of a trivial test class named <a class="el" href="classTestA.html" title="This example shows how to construct and run a single UnitTest class.">TestA</a>, with three test functions named test1, test2 and test3. This definition is copied from <a class="el" href="example1_8cpp_source.html">src/test/examples/example1.cpp</a>. In this trivial example, each of the test functions contains one assertion of an expression that is obviously false (test1 and test 2) or obvioiusly true (for test 3).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;UnitTest.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;UnitTestRunner.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Trivial unit test</span></div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="classTestA.html">TestA</a> : <span class="keyword">public</span> <a class="code hl_class" href="classUnitTest.html">UnitTest</a></div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test1() {</div>
<div class="line"><a class="code hl_function" href="classUnitTest.html#a2e171df00374eb122b38807a8170a64a">printMethod</a>(TEST_FUNC);</div>
<div class="line">TEST_ASSERT(<a class="code hl_function" href="classUnitTest.html#a1dea0f602f4300d8f6a0eddac2f3b147">eq</a>(1,2));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test2() {</div>
<div class="line"><a class="code hl_function" href="classUnitTest.html#a2e171df00374eb122b38807a8170a64a">printMethod</a>(TEST_FUNC);</div>
<div class="line">TEST_ASSERT(<span class="keyword">false</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test3() {</div>
<div class="line"><a class="code hl_function" href="classUnitTest.html#a2e171df00374eb122b38807a8170a64a">printMethod</a>(TEST_FUNC);</div>
<div class="line">TEST_ASSERT(3 == 3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">};</div>
<div class="ttc" id="aclassTestA_html"><div class="ttname"><a href="classTestA.html">TestA</a></div><div class="ttdoc">This example shows how to construct and run a single UnitTest class.</div><div class="ttdef"><b>Definition</b> <a href="example1_8cpp_source.html#l00020">example1.cpp:21</a></div></div>
<div class="ttc" id="aclassUnitTest_html"><div class="ttname"><a href="classUnitTest.html">UnitTest</a></div><div class="ttdoc">UnitTest is a base class for classes that define unit tests.</div><div class="ttdef"><b>Definition</b> <a href="UnitTest_8h_source.html#l00050">UnitTest.h:51</a></div></div>
<div class="ttc" id="aclassUnitTest_html_a1dea0f602f4300d8f6a0eddac2f3b147"><div class="ttname"><a href="classUnitTest.html#a1dea0f602f4300d8f6a0eddac2f3b147">UnitTest::eq</a></div><div class="ttdeci">static bool eq(int s1, int s2)</div><div class="ttdoc">Return true if two integers are equal.</div><div class="ttdef"><b>Definition</b> <a href="UnitTest_8h_source.html#l00403">UnitTest.h:403</a></div></div>
<div class="ttc" id="aclassUnitTest_html_a2e171df00374eb122b38807a8170a64a"><div class="ttname"><a href="classUnitTest.html#a2e171df00374eb122b38807a8170a64a">UnitTest::printMethod</a></div><div class="ttdeci">void printMethod(const char *methodName)</div><div class="ttdoc">Write name of a class method, iff ioProcessor.</div><div class="ttdef"><b>Definition</b> <a href="UnitTest_8h_source.html#l00314">UnitTest.h:314</a></div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="developer_test_usage_testrunner"></a>
Creating a Unit Test Runner</h1>
<p>At the bottom of the file that defines a unit test class, one must add a set of preprocessor macros to define an associated unit test runner.</p>
<p>As an example, here are the required macros for the <a class="el" href="classTestA.html" title="This example shows how to construct and run a single UnitTest class.">TestA</a> unit test defined above: </p><div class="fragment"><div class="line">TEST_BEGIN(<a class="code hl_class" href="classTestA.html">TestA</a>)</div>
<div class="line">TEST_ADD(<a class="code hl_class" href="classTestA.html">TestA</a>, test1)</div>
<div class="line">TEST_ADD(<a class="code hl_class" href="classTestA.html">TestA</a>, test2)</div>
<div class="line">TEST_ADD(<a class="code hl_class" href="classTestA.html">TestA</a>, test3)</div>
<div class="line">TEST_END(<a class="code hl_class" href="classTestA.html">TestA</a>)</div>
</div><!-- fragment --><p> The TEST_BEGIN(UnitTestClass) macro takes one argument, UnitTestClass, which is the name of the associated unit test class. The TEST_ADD(UnitTestClass, TestFunction) macro registers a zero parameter void class member function as a test function. The first argument of TEST_ADD is the name of the unit test class. The second is the name of a member test function. The TEST_END(UnitTestClass) macro also takes the unit test class name as an argument, and ends this block of macros.</p>
<p>This set of macros expands into the code required to create a new subclass of the class template instance <a class="el" href="classUnitTestRunner.html" title="Template for a TestRunner that runs test methods of an associated UnitTest.">UnitTestRunner&lt;UnitTestClass&gt;</a>, and to register a specific set of unit test functions. The name of the new class defined by this set of macros is constructed by appending the suffix "_Runner" to the name of the unit test class. The above example thus generates the definition of a class named TestA_Runner, which is a subclass of <a class="el" href="classUnitTestRunner.html" title="Template for a TestRunner that runs test methods of an associated UnitTest.">UnitTestRunner&lt;TestA&gt;</a>. The name of the UnitTestRuner class may also be referred to using the macro TEST_RUNNER(UnitTestClass), which expands to UnitTestClass_Runner, where "UnitTestClass" represents the name of an actual unit test class (e.g., <a class="el" href="classTestA.html" title="This example shows how to construct and run a single UnitTest class.">TestA</a>).</p>
<h1 class="doxsection"><a class="anchor" id="developer_test_usage_run"></a>
Running a Unit Test Runner</h1>
<p>To run a unit test, one must call the run() method of an instance of the associated test runner class. The simplest code to do this is simply </p><div class="fragment"><div class="line">TEST_RUNNER(<a class="code hl_class" href="classTestA.html">TestA</a>) runner;</div>
<div class="line">runner.run()</div>
</div><!-- fragment --><p> The first line creates an instance of TestA_Runner named runner. The run method, which is invoked in the second line, runs all of the registered test functions, in the order in which they were added, and reports the number of successes and failures.</p>
<p><br  />
 <a class="el" href="developer_test_design_page.html">Test Framework Design</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="developer_test_page.html">Unit Tests</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="developer_test_organization_page.html">Unit Test Organization</a> (Next) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for PSCF by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
